databaseChangeLog:
  - property:
      name: now
      value: current_timestamp
      dbms: postgresql

  # Clear checksums
  - changeSet:
      id: clearChecksums
      author: system
      changes:
        - tagDatabase:
            tag: clear-checksums
      labels: clear-checksums
      
  - include:
      file: shared/00-init-schema.sql
      relativeToChangelogFile: true
  
  # Spring Modulith
  - include:
      file: shared/01-modulith-tables.sql
      relativeToChangelogFile: true

  # User module
  - include:
      file: modules/user/01-user-tables.sql
      relativeToChangelogFile: true
  - include:
      file: modules/user/02-user-indexes.sql
      relativeToChangelogFile: true
  - include:
      file: modules/user/03-user-seed.sql
      relativeToChangelogFile: true

  # Customer module
  - include:
      file: modules/customer/01-customer-tables.sql
      relativeToChangelogFile: true
  - include:
      file: modules/customer/02-customer-indexes.sql
      relativeToChangelogFile: true
  - include:
      file: modules/customer/03-customer-seed.sql
      relativeToChangelogFile: true

  # Product module
  - include:
      file: modules/product/01-product-tables.sql
      relativeToChangelogFile: true
  - include:
      file: modules/product/02-product-indexes.sql
      relativeToChangelogFile: true
  - include:
      file: modules/product/03-product-seed.sql
      relativeToChangelogFile: true

  # Payment module
  - include:
      file: modules/payment/01-payment-tables.sql
      relativeToChangelogFile: true
  - include:
      file: modules/payment/02-payment-indexes.sql
      relativeToChangelogFile: true
  - include:
      file: modules/payment/03-payment-seed.sql
      relativeToChangelogFile: true

  # Order module
  - include:
      file: modules/order/01-order-tables.sql
      relativeToChangelogFile: true
  - include:
      file: modules/order/02-order-indexes.sql
      relativeToChangelogFile: true
  - include:
      file: modules/order/03-order-seed.sql
      relativeToChangelogFile: true
