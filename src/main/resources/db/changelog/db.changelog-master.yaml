databaseChangeLog:
  - preConditions:
    - runningAs:
        username: postgres

  # Shared types
  - include:
      file: db/changelog/shared/00-init-schema.sql
      
  # Spring Modulith
  - include:
      file: db/changelog/shared/01-modulith-tables.sql

  # Product Module
  - include:
      file: db/changelog/modules/product/01-product-tables.sql
      relativeToChangelogFile: false
  - include:
      file: db/changelog/modules/product/02-product-indexes.sql
      relativeToChangelogFile: false

  # Customer Module  
  - include:
      file: db/changelog/modules/customer/01-customer-tables.sql
      relativeToChangelogFile: false
  - include:
      file: db/changelog/modules/customer/02-customer-indexes.sql
      relativeToChangelogFile: false

  # Order Module
  - include:
      file: db/changelog/modules/order/01-order-tables.sql
      relativeToChangelogFile: false
  - include:
      file: db/changelog/modules/order/02-order-indexes.sql
      relativeToChangelogFile: false

  # Order module
  - include:
      file: modules/order/01-order-tables.sql
      relativeToChangelogFile: true
  - include:
      file: modules/order/02-order-indexes.sql
      relativeToChangelogFile: true
  - include:
      file: modules/order/03-order-seed.sql
      relativeToChangelogFile: true

  # Payment module
  - include:
      file: db/changelog/modules/customer/03-customer-seed.sql
  - include:
      file: db/changelog/modules/order/03-order-seed.sql
  - include:
      file: db/changelog/modules/payment/03-payment-seed.sql 